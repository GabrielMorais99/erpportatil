---
alwaysApply: true
---

Esta regra se aplica a tudo em:

/api
crypto-config.js
login.js
protection.js
save.js / load.js / admin.js

REGRAS INEGOCIÁVEIS:

-   Sempre validar headers e origem
-   Sempre tratar CORS
-   Nunca confiar no cliente
-   Sempre validar usuário e sessão
-   Implementar rate-limit quando possível

CRIPTOGRAFIA:

-   Algoritmo padrão: AES-GCM
-   Chave: derivada com PBKDF2 (100000+ iterações)
-   Sempre usar: Salt + IV dinâmico
-   Nunca repetir IV
-   Nunca transmitir a chave

VERCEL / SERVERLESS:

-   Tempo máximo considerado: 5s
-   Funções puras e leves
-   Zero estado em memória
-   Sempre usar process.env para segredos
-   Sempre prever falha de rede

PADRÃO DE RESPOSTA AO GERAR APIs:

1. Lógica segura
2. Versão otimizada para Vercel
3. Proteção contra abuso básica
4. Boas práticas incluídas por padrão
