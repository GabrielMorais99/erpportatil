# Regras para Cursor AI neste projeto ERP

## Contexto do Projeto
- Sistema ERP Full Stack para gestão financeira
- Stack: HTML, CSS, JavaScript (sem frameworks pesados)
- Foco: Controle de estoque, vendas, clientes, financeiro, multiusuário

## Padrões de Código
- Sempre usar const/let, evitar var
- Funções arrow quando possível
- Comentários em português para lógica complexa
- Seguir padrões do emergente.sh para UI
- Usar JSDoc para documentar funções principais

## Estrutura ERP
- Sempre pensar em: estoque, vendas, clientes, financeiro
- Validar regras de negócio antes de executar
- Considerar multiusuário e permissões
- Pensar em escalabilidade e performance
- Auditoria obrigatória para operações críticas

## Regras de Negócio Importantes
- Estoque não pode ser negativo
- Desconto máximo: 50% (exceto admin)
- Vendas precisam de cliente válido
- Permissões: admin > manager > user
- Auditoria: todas operações CRUD devem ser logadas

## Quando Gerar Código
Sempre fornecer:
1. Estrutura do código (comentários descritivos)
2. Funções principais (com JSDoc)
3. Como integrar ao projeto atual
4. Melhorias de performance
5. Possíveis bugs e correções

## Nomenclatura
- Funções: verbo + substantivo (ex: calcularTotalVenda)
- Variáveis: camelCase descritivo (ex: totalVendasMes)
- Constantes: UPPER_SNAKE_CASE (ex: MAX_DESCONTO)
- Classes: PascalCase (ex: LojaApp)

## Validações
- Sempre validar permissões antes de operações
- Validar dados de entrada
- Verificar regras de negócio
- Tratar erros adequadamente

## Persistência
- Usar this.saveData() para salvar
- Usar this.loadData() para carregar
- IndexedDB quando disponível, localStorage como fallback
- JSONBin para sincronização na nuvem

## UI/UX
- Seguir padrões emergente.sh
- Usar ToastSystem para notificações
- Usar ConfirmSystem para confirmações
- Loading states para operações assíncronas
- Responsivo mobile-first

## Integrações
- E-commerce: WooCommerce, Shopify, Mercado Livre
- ERP: TOTVS, SAP
- Email: SMTP, SendGrid, SES, Mailgun
- SMS: Twilio, Zenvia, TotalVoice
- WhatsApp: Business API

## Multiusuário
- Verificar permissões com this.checkPermission()
- Logar ações com this.logAction()
- Isolar dados por usuário
- Auditoria completa

## Performance
- Cache de gráficos (5 minutos)
- Debounce em buscas (300ms)
- Lazy loading quando possível
- Paginação para listas grandes

## Segurança
- Validar inputs no servidor (quando houver)
- Criptografar dados sensíveis
- Rate limiting em operações críticas
- Logout automático por inatividade
